### HTTP的概念

特性：简单，灵活，易于扩展，应用广泛和跨平台。



Web上的通信都是建立在HTTP协议上

- 客户端发起HTTP请求
- 服务端做出响应处理后，返回HTTP响应报文





### HTTP常见的状态码有哪些

1xx：状态码提示信息，是协议处理中一种中间状态，实际用到比较少

2xx类状态码表示服务器成功处理了客户端的请求，

200：表示一切正常

204：响应头中body数据

206：是应用于HTTP分块下载或断点续传，表示响应返回的body数据并不是资源的全部



3xx; 表示客户端请求的资源发生了变动，需要客户端用新的url重新发送请求获取资源，也就是重定向。

301：永久重定向，请求资源已经不存在

302：临时重定向，说明请求资源存在，但暂时需要使用另一个url来访问。

301和302中都有一个Location，指明后续要跳转的url



304不具有跳转的含义，表示资源未修改，重定向已存在的缓冲文件，也称缓存重定向，也就是告诉客户端可以继续使用缓存资源，用于缓存控制。



4xx类状态码表示客户端报文有误，服务器无法处理，也就是错误码的含义。

400：Bad Request 表示客户端请求的报文有错误。

403：表示服务器禁止访问资源，并不是客户端的请求出错。

404：表示请求的资源在服务器上不存在或未找到，所以无法提供给客户端。







### GET和POST有什么区别？

get请求：

1. **根据 RFC 规范，GET 的语义是从服务器获取指定的资源**，这个资源可以是**静态的文本、页面、图片视频**等。
2. GET 请求的参数位置一般是写在 URL 中，URL 规定只能支持 ASCII，所以 GET 请求的参数只允许 ASCII 字符 
3. 而且浏览器会对 URL 的长度有限制（HTTP协议本身对 URL长度并没有做任何规定）

post请求

1. 根据 RFC 规范，**POST 的语义是根据请求负荷（报文body）对指定的资源做出处理**，具体的处理方式视资源类型而不同。
2. POST **请求携带数据的位置一般是写在报文 body 中，body 中的数据可以是任意格式的数据**，只要客户端与服务端协商好即可，
3. 而且**浏览器不会对 body 大小做限制**



### get请求和post请求都是安全和幂等的吗

什么是安全和幂等？

在HTTP协议里：安全是指请求不会破坏服务器上的资源。幂等，指的是多次执行相同的操作，结果都是相同的。

在RFC规范定义来看：

1. GET方法是安全幂等的，因为它只进行只读操作，无论操作多少次，服务器上的资源都是安全的。
2. post因为新增或者提交数据，会修改服务器上的资源，所以是不安全的，且多次提交数据就会创建多个资源，所以不是幂等的。



### HTTP缓存技术

对于一些重复性的HTTP请求，比如每次请求得到的数据是一样的，我们可以把这对 [请求-响应] 的数据缓存在本地中，那么下次就直接读取本地的数据即可，不必再通过网络获取服务器上的响应，这样的话，提高了HTTP访问技术。

缓存技术分为 **强制缓存** 和 **协商缓存**



强制缓存指的是只要浏览器判断缓存有没有过期，则直接使用浏览器的本地缓存，决定是否使用缓存的主动性在于浏览器这边。

如下图，返回的是200状态码，但在size项中标识的是from disk cache， 就是要强制缓存。

<img src="C:\Users\A\AppData\Roaming\Typora\typora-user-images\image-20230506152205531.png" alt="image-20230506152205531" style="zoom:67%;" />

​	

强缓存是利用下面这两个 HTTP 响应头部（Response Header）字段实现的，它们都用来表示资源在客户端缓存的有效期：

- `Cache-Control`， 是一个相对时间；
- `Expires`，是一个绝对时间；

如果 HTTP 响应头部**同时有 Cache-Control 和 Expires 字段**的话，**Cache-Control 的优先级高于 Expires** 。



Cache-control 选项更多一些：

1. 当浏览器第一次请求访问资源时，服务器会再返回这个资源同时，同时再响应报头上添加Cache-Control,Cache-Control中设置了
2. 过期的大小。
3. 浏览器再次访问服务器中的资源时，会先通过请求资源的时间与Cache-Conctl中的时间进行比较，如果没过期，则使用该缓存，否则请求服务器。
4. 服务器再次收到请求后，则会更新响应上的Cache-Control



### 协商缓存

当我们在浏览器使用开发者工具的时候，你可能会**看到过某些请求的响应码是 `304`**，这个是**告诉浏览器可以使用本地缓存的资源**，通常这种通过服务端告知客户端是否可以使用缓存的方式被称为协商缓存

<img src="C:\Users\A\AppData\Roaming\Typora\typora-user-images\image-20230506152844063.png" alt="image-20230506152844063" style="zoom:67%;" />1

<img src="C:\Users\A\AppData\Roaming\Typora\typora-user-images\image-20230506152909805.png" alt="image-20230506152909805" style="zoom: 67%;" />1

所以**协商缓存就是与服务端协商之后，通过协商结果来判断是否使用本地缓存**。