## 1.I/O(数据交换过程)

I/O即input/output(输入和输出),由于程序和运行时数据是在内存中驻留，由cpu这个超快的计算核心来执行，涉及到数据交换的地方，通常是磁盘，网络等，就需要IO接口。

Input Stream就是数据从外⾯（磁盘、⽹络）流进内存， Output Stream就是数据从内存流到外⾯去。

## 阻塞IO

当进程或线程等待某个条件，如果条件不满足，则一直等待下去，条件满足，则进行下一步操作。

应用进程通过系统调用recvfrom接收数据，如果内核还没准备好数据，应用进程就会阻塞住，直到内核准备好数据，recvfrom完成数据报的复制，进程才会阻塞。



优点：

设备文件不可操作时，可进入休眠状态，将CPU资源让出，当设备文件可以操作时就必须唤醒进程，一般中断函数中唤醒工作。

缺点：

耗费时间，适合并发低，时效性要求低的情况。



#### 非阻塞IO

应用进程与内核交互，目的未达到前，不再一味的等着，而是直接返回。

通过轮询的方式，不停的去访问内核数据准备好了没有，如果某一次轮询发现内核的数据已经准备好了，那么直接将数据拷贝到用户空间。

##### 缺点：往往耗费大量CPU时间



### IO复用

多个进程的IO到同一个select，当用户进程调用select，则select监听所有注册好的IO:

- 1.若所有被监听的I/O需要的数据未准备好，则阻塞。
- 2.任意一个所需的数据准备好，select调用返回。
- 3.用户进程通过recbfrom进行数据拷贝。

优点：可以等待多个描述符就绪。



#### 信号驱动IO

开始套接字信号驱动IO功能，通过sigaction系统调用安装一个信号处理函数，该系统函数立即返回，不阻塞。

数据报准备好后，内核为**该进程产生了一个SIGIO信号递交给进程**。

可以在**信号处理函数中调用recvfrom读取数据报**，通知主循环已准备好待处理。

可以立即通知主循环，读取数据报。



#### 异步IO

用户进程告知内核启动某个操作，并由内核在整个操作中完成后通知用户进程。





#### Poll

动态数组，以链表的形式组织，相比于select，它没有文件描述符的限制，但是也会系统的文件描述符的限制。



### select和poll的区别

select和poll采用轮询的方式检查就绪事件，每次都要扫描整个文件描述符 ，时间复杂度为O(N)

select:内核需要将消息传递给用户空间，都需要拷贝的动作，epoll通过内核和用户空间共享一块内存来实现的。

